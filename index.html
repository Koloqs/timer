<!DOCTYPE html>
<html lang="en" class="size-full ">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Timer</title>
      <link href="output.css" rel="stylesheet">
      <style>
        .hidden { display: none !important; }
        .transition-colors { transition: color 0.2s ease; }
      </style>

</head>
<body class="size-full flex justify-center items-center bg-red-500">
    <section class="h-60 w-200 bg-amber-100 rounded-full float-left shadow-amber-200 shadow-lg">
        <section class="flex items-center justify-center rounded-full size-54 bg-amber-200 my-3 mx-10 float-left">
            <p class="text-4xl font-bold">25:00</p>
        </section>

        <button class="active:bg-amber-500 bg-amber-300 shadow-amber-200 shadow-lg hover:bg-amber-400 hover:shadow-amber-300 hover:shadow-2xl rounded-full size-30 my-15 font-bold mx-4">Start</button>
        <button class="active:bg-amber-500 bg-amber-300 shadow-amber-200 shadow-lg hover:bg-amber-400 hover:shadow-amber-300 hover:shadow-2xl rounded-full size-30 my-15 font-bold mx-4">Stop</button>
        <button class="bg-amber-300 shadow-amber-200 shadow-lg hover:bg-amber-400 hover:shadow-amber-300 hover:shadow-2xl rounded-full size-30 my-15 font-bold mx-4 active:bg-amber-500">Reset</button>
    </section>

    <!-- Rating Modal -->
    <div id="ratingModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-amber-100 rounded-4xl p-8 shadow-2xl max-w-md mx-4">
            <h2 class="text-5xl font-bold text-center mb-6">Session Complete!</h2>
            <p class="text-center mb-6">How productive was this session?</p>
            
            <!-- Star Rating -->
            <div class="flex justify-center mb-6">
                <div class="flex space-x-2">
                    <button class="star-btn text-4xl text-gray-300 hover:text-amber-400 transition-colors" data-rating="1">â˜…</button>
                    <button class="star-btn text-4xl text-gray-300 hover:text-amber-400 transition-colors" data-rating="2">â˜…</button>
                    <button class="star-btn text-4xl text-gray-300 hover:text-amber-400 transition-colors" data-rating="3">â˜…</button>
                    <button class="star-btn text-4xl text-gray-300 hover:text-amber-400 transition-colors" data-rating="4">â˜…</button>
                    <button class="star-btn text-4xl text-gray-300 hover:text-amber-400 transition-colors" data-rating="5">â˜…</button>
                </div>
            </div>
            
            <div class="flex justify-center space-x-4">
                <button id="submitRating" class="bg-amber-300 hover:bg-amber-400 active:bg-amber-500 px-6 py-3 rounded-full font-bold shadow-lg">Submit</button>
                <button id="skipRating" class="bg-gray-300 hover:bg-gray-400 active:bg-gray-500 px-6 py-3 rounded-full font-bold shadow-lg">Skip</button>
            </div>
        </div>
    </div>

    <!-- Statistics Panel -->
    <div id="statsPanel" class="fixed top-4 right-4 bg-amber-100 rounded-4xl p-4 shadow-lg max-w-xs hidden">
        <h3 class="font-bold text-center mb-2">Session Stats</h3>
        <div class="text-sm">
            <p>Sessions: <span id="sessionCount">0</span></p>
            <p>Avg Rating: <span id="avgRating">--</span></p>
            <p>Last Rating: <span id="lastRating">--</span></p>
        </div>
        <button id="toggleStats" class="w-full mt-2 bg-amber-300 hover:bg-amber-400 py-1 rounded-full text-sm font-bold">Hide</button>
    </div>

    <!-- Stats Toggle Button -->
    <button id="showStats" class="fixed top-4 right-4 bg-amber-300 hover:bg-amber-400 active:bg-amber-500 p-3 rounded-full shadow-lg font-bold">ðŸ“Š</button>
    <script>
 
        const startButton = document.querySelector('button:nth-child(2)');
        const stopButton = document.querySelector('button:nth-child(3)');   
        const resetButton = document.querySelector('button:nth-child(4)');
        const timerDisplay = document.querySelector('p');
        const ratingModal = document.getElementById('ratingModal');
        const starButtons = document.querySelectorAll('.star-btn');
        const submitRatingBtn = document.getElementById('submitRating');
        const skipRatingBtn = document.getElementById('skipRating');
        const statsPanel = document.getElementById('statsPanel');
        const showStatsBtn = document.getElementById('showStats');
        const toggleStatsBtn = document.getElementById('toggleStats');
        
        let timer;
        let time = 1500; // 25 minutes (1500 seconds) 
        let isRunning = false;
        let selectedRating = 0;
        
        // Load statistics from localStorage
        function getStats() {
            const stats = localStorage.getItem('timerStats');
            return stats ? JSON.parse(stats) : { sessions: 0, ratings: [], totalRating: 0 };
        }
        
        // Save statistics to localStorage
        function saveStats(stats) {
            localStorage.setItem('timerStats', JSON.stringify(stats));
        }
        
        // Update statistics display
        function updateStatsDisplay() {
            const stats = getStats();
            document.getElementById('sessionCount').textContent = stats.sessions;
            document.getElementById('avgRating').textContent = stats.sessions > 0 
                ? (stats.totalRating / stats.ratings.length).toFixed(1) + 'â˜…' 
                : '--';
            document.getElementById('lastRating').textContent = stats.ratings.length > 0 
                ? stats.ratings[stats.ratings.length - 1] + 'â˜…' 
                : '--';
        }
        
        // Show rating modal
        function showRatingModal() {
            ratingModal.classList.remove('hidden');
            selectedRating = 0;
            starButtons.forEach(btn => {
                btn.classList.remove('text-amber-400');
                btn.classList.add('text-gray-300');
            });
        }
        
        // Hide rating modal
        function hideRatingModal() {
            ratingModal.classList.add('hidden');
        }
        
        // Handle star rating selection
        starButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                selectedRating = parseInt(btn.dataset.rating);
                starButtons.forEach((star, index) => {
                    if (index < selectedRating) {
                        star.classList.remove('text-gray-300');
                        star.classList.add('text-amber-400');
                    } else {
                        star.classList.remove('text-amber-400');
                        star.classList.add('text-gray-300');
                    }
                });
            });
        });
        
        // Submit rating
        submitRatingBtn.addEventListener('click', () => {
            if (selectedRating > 0) {
                const stats = getStats();
                stats.sessions++;
                stats.ratings.push(selectedRating);
                stats.totalRating += selectedRating;
                saveStats(stats);
                updateStatsDisplay();
                hideRatingModal();
            }
        });
        
        // Skip rating
        skipRatingBtn.addEventListener('click', () => {
            const stats = getStats();
            stats.sessions++;
            saveStats(stats);
            updateStatsDisplay();
            hideRatingModal();
        });
        
        // Show/hide stats panel
        showStatsBtn.addEventListener('click', () => {
            statsPanel.classList.remove('hidden');
            showStatsBtn.classList.add('hidden');
            updateStatsDisplay();
        });
        
        toggleStatsBtn.addEventListener('click', () => {
            statsPanel.classList.add('hidden');
            showStatsBtn.classList.remove('hidden');
        });
        
        // Timer functionality
        startButton.addEventListener('click', () => {
            if (!isRunning) {
                isRunning = true;
                timer = setInterval(() => {
                    if (time > 0) {
                        time--;
                        const minutes = Math.floor(time / 60);
                        const seconds = time % 60;
                        timerDisplay.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                    } else {
                        clearInterval(timer);
                        isRunning = false;
                        showRatingModal(); // Show rating modal when timer completes
                    }
                }, 1000);
            }
        });
        
        resetButton.addEventListener('click', () => {
            isRunning = false;
            clearInterval(timer);
            time = 1500; // Reset to 25 minutes (1500 seconds)
            timerDisplay.textContent = '25:00';
        });
        
        stopButton.addEventListener('click', () => {
            isRunning = false;
            clearInterval(timer);
        });
        
        // Initialize stats display on page load
        updateStatsDisplay();

    </script>
</body>
</html>